<!DOCTYPE html>
<html>
    <head>
        <title>Jeu cellule</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="style.css" rel="stylesheet"/>
    </head>
    <body>
        <div id="StartDiv">
            <div id="Bacterie"></div>
        </div>
        <div id="debug"></div>
        <script>
            //Variables

            var ScreenSizeWidth = screen.width; // Largeur de l'écran
            var ScreenSizeHeight = screen.height; // Longeur de l'écran
            var MAX = 1.5 ;
            var MIN = 1.2 ;
            i = 1;
            ToutLesEtres = {cellules: [],
                            bacteries: []
            };

            class Etre {
              constructor(){
                this.posX = Math.floor(Math.random() * (Zone.largeur - 20 - 10) + 10);
                this.posY =  Math.floor(Math.random() * (Zone.hauteur - 20 - 10) + 10);
                this.deltaX = Math.random() * (MAX - MIN) + MIN;
                this.deltaY = Math.random() * (MAX - MIN) + MIN;
              }
            }

            class Cellule extends Etre {
              constructor(){
                super();
                this.taille = 20;
                var nouveauDiv = document.createElement("div");
                nouveauDiv.id = "Cellule"+ToutLesEtres.cellules.length;
                Zone.element.appendChild(nouveauDiv);
                this.element = document.getElementById(nouveauDiv.id);
                this.element.style.position = "absolute";
                this.element.style.border = "1px black solid";
                this.element.style.width = this.taille + "px";
                this.element.style.height = this.taille + "px";
                ToutLesEtres.cellules.push(this);
              }
            }

            class Bacterie extends Etre {
              constructor(){
                this.taille = 15;
              }
            }

            Zone = {largeur: ScreenSizeWidth - 200,
                    hauteur: ScreenSizeHeight - 300,
                    element: document.getElementById("StartDiv")};

            for (var i = 0; i < 5; i++) {
              new Cellule();
            }

            Bacterie = {posX: Math.floor(Math.random() * (ScreenSizeWidth - 200 - 20 - 10) + 10),
                        posY: Math.floor(Math.random() * (ScreenSizeHeight - 300 - 20 - 10) + 10),
                        element: document.getElementById("Bacterie"),
                        taille: 15,
                        deltaX: Math.random() * (MAX - MIN) + MIN,
                        deltaY: Math.random() * (MAX - MIN) + MIN
                      };

            function Affiche(objet){
              objet.element.style.left = objet.posX + "px";
              objet.element.style.top = objet.posY + "px";
            }

            //Traitement

            //Cadre
            Zone.element.style.width = Zone.largeur + "px";// Set la largeur de StartDiv
            Zone.element.style.height = Zone.hauteur + "px";// Set la longueur de StartDiv


            //Bactérie
            Bacterie.element.style.width = "15px"; // Set la largeur de la bactérie
            Bacterie.element.style.height = "15px"; // Set la longueur de la bactérie
            Affiche(Bacterie);

            // Le nom de la fonction est peut-etre mal choisi
            function Direction(objet){
              objet.posX += objet.deltaX;
              objet.posY += objet.deltaY;
            }

            function CheckBord(objet){

              if ((1 - 0 > objet.posX) || (objet.posX >= ScreenSizeWidth - 200 - objet.taille)) {
              objet.deltaX = -objet.deltaX;
              }

              if ((1 - 0 > objet.posY) || (objet.posY >= ScreenSizeHeight - 300 - objet.taille)) {
              objet.deltaY = -objet.deltaY;
              }

            }

            function BacterieMouvement(){
              Direction(Bacterie);
              for (var i = 0; i < ToutLesEtres.cellules.length; i++) {
                Direction(ToutLesEtres.cellules[i]);
                Affiche(ToutLesEtres.cellules[i]);
                CheckBord(ToutLesEtres.cellules[i]);
              }
              //Direction(Cellule1);
              //Direction(Cellule2);
              //Direction(Cellule3);
              //Direction(Cellule4);
              Affiche(Bacterie);
              //Affiche(Cellule1);
              //Affiche(Cellule2);
              //Affiche(Cellule3);
              //Affiche(Cellule4);
              CheckBord(Bacterie);
              //CheckBord(Cellule1);
              //CheckBord(Cellule2);
              //CheckBord(Cellule3);
              //CheckBord(Cellule4);
            }
            setInterval(BacterieMouvement, 10);

        </script>
    </body>
</html>
